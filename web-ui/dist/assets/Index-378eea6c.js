import{d as a,a as e,j as l,c as t,e as s,w as d,f as o,E as r,g as c,p as i,o as u,F as n,m as p,b as v,i as h,q as f,l as _,t as m,s as w,x as b,_ as g}from"./index-462fafd6.js";import{g as y}from"./record-f885688b.js";const k={class:"dashboard-container"},C={class:"stat-card-content"},F={class:"stat-info"},x={class:"stat-value"},j={class:"stat-title"},E={class:"card-header"},V={class:"chart-container"},z={class:"chart-placeholder"},A={class:"chart-container"},I={class:"chart-placeholder"},N={class:"card-header"},q=g(a({__name:"Index",setup(a){const g=o(),q=e(!1),L=e("week"),S=e([]),T=e([{title:"任务总数",value:"--",icon:"List",color:"#409EFF"},{title:"今日执行次数",value:"--",icon:"Clock",color:"#67C23A"},{title:"执行成功率",value:"--",icon:"Check",color:"#E6A23C"},{title:"异常任务数",value:"--",icon:"WarningFilled",color:"#F56C6C"}]),U=()=>{g.push("/record/list")};return l((()=>{(async()=>{q.value=!0;try{const a=await y({page:1,pageSize:10});S.value=a.list}catch(a){r.error("获取最近执行记录失败")}finally{q.value=!1}})()})),(a,e)=>{const l=c("el-icon"),o=c("el-card"),r=c("el-col"),y=c("el-row"),W=c("el-radio-button"),$=c("el-radio-group"),B=c("el-empty"),D=c("el-button"),G=c("el-table-column"),H=c("el-tag"),J=c("el-table"),K=i("loading");return u(),t("div",k,[s(y,{gutter:20},{default:d((()=>[(u(!0),t(n,null,p(T.value,((a,e)=>(u(),_(r,{span:6,key:e},{default:d((()=>[s(o,{class:"stat-card",shadow:"hover"},{default:d((()=>[v("div",C,[v("div",{class:"stat-icon",style:w({backgroundColor:a.color})},[s(l,null,{default:d((()=>[(u(),_(b(a.icon)))])),_:2},1024)],4),v("div",F,[v("div",x,m(a.value),1),v("div",j,m(a.title),1)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),s(y,{gutter:20,class:"mt-20"},{default:d((()=>[s(r,{span:16},{default:d((()=>[s(o,{shadow:"hover"},{header:d((()=>[v("div",E,[e[3]||(e[3]=v("span",null,"任务执行趋势",-1)),s($,{modelValue:L.value,"onUpdate:modelValue":e[0]||(e[0]=a=>L.value=a),size:"small"},{default:d((()=>[s(W,{label:"week"},{default:d((()=>e[1]||(e[1]=[h("近一周")]))),_:1}),s(W,{label:"month"},{default:d((()=>e[2]||(e[2]=[h("近一月")]))),_:1})])),_:1},8,["modelValue"])])])),default:d((()=>[v("div",V,[v("div",z,[s(B,{description:"加载数据中..."})])])])),_:1})])),_:1}),s(r,{span:8},{default:d((()=>[s(o,{shadow:"hover"},{header:d((()=>e[4]||(e[4]=[v("div",{class:"card-header"},[v("span",null,"部门任务分布")],-1)]))),default:d((()=>[v("div",A,[v("div",I,[s(B,{description:"加载数据中..."})])])])),_:1})])),_:1})])),_:1}),s(y,{gutter:20,class:"mt-20"},{default:d((()=>[s(r,{span:24},{default:d((()=>[s(o,{shadow:"hover"},{header:d((()=>[v("div",N,[e[6]||(e[6]=v("span",null,"最近执行记录",-1)),s(D,{type:"primary",link:"",onClick:U},{default:d((()=>e[5]||(e[5]=[h("查看更多")]))),_:1})])])),default:d((()=>[f((u(),_(J,{data:S.value,style:{width:"100%"}},{default:d((()=>[s(G,{prop:"taskName",label:"任务名称","min-width":"150"}),s(G,{prop:"departmentName",label:"所属部门",width:"120"}),s(G,{prop:"startTime",label:"执行时间",width:"180"}),s(G,{prop:"duration",label:"耗时(ms)",width:"100"}),s(G,{prop:"status",label:"状态",width:"100"},{default:d((a=>[s(H,{type:"success"===a.row.status?"success":"danger"},{default:d((()=>[h(m("success"===a.row.status?"成功":"失败"),1)])),_:2},1032,["type"])])),_:1}),s(G,{label:"操作",width:"120"},{default:d((a=>[s(D,{type:"primary",link:"",onClick:e=>{return l=a.row.id,void g.push(`/record/detail/${l}`);var l}},{default:d((()=>e[7]||(e[7]=[h(" 查看详情 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[K,q.value]])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-44f6ed01"]]);export{q as default};
