import{d as e,u as a,r as s,a as r,c as l,b as o,e as n,w as i,f as t,v as u,g as d,o as p,h as m,i as g,E as c,_ as f}from"./index-462fafd6.js";const w={class:"login-container"},v={class:"login-box"},_={class:"register-link"},y=f(e({__name:"Login",setup(e){const f=t(),y=a(),b=s({username:"admin",password:"admin123"}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:(e,a,s)=>{a?u(a)?s():s(new Error("用户名格式不正确")):s(new Error("请输入用户名"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度不能少于8个字符",trigger:"blur"}]},k=r(),V=r(!1),x=async()=>{k.value&&await k.value.validate((async e=>{if(e){V.value=!0;try{await y.login(b.username,b.password);c.success("登录成功"),f.push({path:"/"})}catch(a){if(a.response&&401===a.response.status){const e=a.response.data;e&&e.message?c.error(e.message):c.error("用户名或密码错误")}else a.message?c.error(a.message):c.error("登录失败，请检查用户名和密码")}finally{V.value=!1}}}))},E=()=>{f.push({path:"/register"})};return(e,a)=>{const s=d("el-input"),r=d("el-form-item"),t=d("el-button"),u=d("el-link"),c=d("el-form");return p(),l("div",w,[o("div",v,[a[5]||(a[5]=o("div",{class:"login-title"},[o("h1",null,"DistributedJob"),o("p",null,"分布式任务调度系统")],-1)),n(c,{ref_key:"loginFormRef",ref:k,model:b,rules:h,class:"login-form"},{default:i((()=>[n(r,{prop:"username"},{default:i((()=>[n(s,{modelValue:b.username,"onUpdate:modelValue":a[0]||(a[0]=e=>b.username=e),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])])),_:1}),n(r,{prop:"password"},{default:i((()=>[n(s,{modelValue:b.password,"onUpdate:modelValue":a[1]||(a[1]=e=>b.password=e),placeholder:"密码","prefix-icon":"Lock",type:"password","show-password":"",onKeyup:m(x,["enter"])},null,8,["modelValue"])])),_:1}),n(r,null,{default:i((()=>[n(t,{loading:V.value,type:"primary",class:"login-button",onClick:x},{default:i((()=>a[2]||(a[2]=[g(" 登录 ")]))),_:1},8,["loading"])])),_:1}),o("div",_,[a[4]||(a[4]=g(" 没有账号？")),n(u,{type:"primary",onClick:E},{default:i((()=>a[3]||(a[3]=[g("立即注册")]))),_:1})])])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-fe5a092e"]]);export{y as default};
