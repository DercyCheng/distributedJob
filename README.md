# Go-Job

ä¸€ä¸ªç°ä»£åŒ–çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å’Œç®¡ç†ç³»ç»Ÿï¼ŒåŸºäº Go è¯­è¨€å¼€å‘ï¼Œæä¾› Web ç•Œé¢å’Œ API æ¥å£ã€‚

![Go Version](https://img.shields.io/badge/Go-1.23+-blue.svg)
![Vue Version](https://img.shields.io/badge/Vue-3.3+-green.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

## âœ¨ ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº Go è¯­è¨€å¼€å‘ï¼Œæ”¯æŒé«˜å¹¶å‘ä»»åŠ¡è°ƒåº¦
- ğŸ¯ **å¤šåè®®æ”¯æŒ**: æä¾› HTTP REST API å’Œ gRPC æ¥å£
- ğŸ–¥ï¸ **ç°ä»£åŒ– UI**: åŸºäº Vue 3 + Element Plus çš„å“åº”å¼ Web ç•Œé¢
- ğŸ“Š **å®æ—¶ç›‘æ§**: é›†æˆ Prometheus + Grafana ç›‘æ§ä½“ç³»
- ğŸ” **æƒé™ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™æ§åˆ¶ç³»ç»Ÿ
- ğŸ”„ **ä»»åŠ¡è°ƒåº¦**: çµæ´»çš„ Cron è¡¨è¾¾å¼æ”¯æŒ
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–**: MySQL æ•°æ®åº“ + Redis ç¼“å­˜
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**: å®Œæ•´çš„ Docker å’Œ Docker Compose æ”¯æŒ
- ğŸ¤– **AI é›†æˆ**: æ”¯æŒ MCP (Model Context Protocol) æ™ºèƒ½è°ƒåº¦

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
go-job/
â”œâ”€â”€ api/                    # API å±‚
â”‚   â”œâ”€â”€ grpc/              # gRPC æ¥å£å®šä¹‰
â”‚   â””â”€â”€ http/              # HTTP REST API
â”œâ”€â”€ internal/              # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ auth/              # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ job/               # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ scheduler/         # è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ mcp/               # MCP AI è°ƒåº¦
â”‚   â””â”€â”€ ...
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ redis/             # Redis å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth/              # JWT è®¤è¯
â”‚   â””â”€â”€ ...
â”œâ”€â”€ web/                   # Vue.js å‰ç«¯
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â””â”€â”€ scripts/               # éƒ¨ç½²è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.23+
- Node.js 18+
- Docker & Docker Compose (å¯é€‰)
- MySQL 8.0+
- Redis 7+

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½² (æ¨è)

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd go-job
```

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**
```bash
make docker
# æˆ–è€…
docker-compose up -d
```

3. **è®¿é—®åº”ç”¨**
- Web ç•Œé¢: http://localhost:8080
- API æ–‡æ¡£: http://localhost:8080/api/docs
- Grafana ç›‘æ§: http://localhost:3000 (admin/admin)
- Prometheus: http://localhost:9090

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

1. **å®‰è£…ä¾èµ–**
```bash
# åç«¯ä¾èµ–
make deps

# å‰ç«¯ä¾èµ–
cd web
npm install
```

2. **é…ç½®æ•°æ®åº“**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p < scripts/init.sql
```

3. **å¯åŠ¨ Redis**
```bash
redis-server
```

4. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
make dev
```

5. **å¯åŠ¨å‰ç«¯æœåŠ¡**
```bash
cd web
npm run dev
```

## ğŸ“‹ å¯ç”¨å‘½ä»¤

```bash
# æ„å»ºå’Œè¿è¡Œ
make build          # ç¼–è¯‘åº”ç”¨
make run            # è¿è¡Œåº”ç”¨
make dev            # å¼€å‘æ¨¡å¼è¿è¡Œ

# Docker ç›¸å…³
make docker         # æ„å»ºå¹¶å¯åŠ¨ Docker å®¹å™¨
make docker-build   # æ„å»º Docker é•œåƒ
make docker-up      # å¯åŠ¨ Docker å®¹å™¨
make docker-down    # åœæ­¢ Docker å®¹å™¨

# å¼€å‘å·¥å…·
make test           # è¿è¡Œæµ‹è¯•
make lint           # ä»£ç æ£€æŸ¥
make fmt            # æ ¼å¼åŒ–ä»£ç 
make proto          # ç”Ÿæˆ protobuf æ–‡ä»¶
make clean          # æ¸…ç†æ„å»ºæ–‡ä»¶
```

## ğŸ”§ é…ç½®è¯´æ˜

ä¸»è¦é…ç½®æ–‡ä»¶ä½äº `configs/config.yaml`:

```yaml
server:
  port: 8080
  grpc_port: 9090

database:
  host: localhost
  port: 3306
  username: go_job
  password: password
  database: go_job

redis:
  addr: localhost:6379
  password: ""
  db: 0

auth:
  jwt_secret: "your-secret-key"
  expire_hours: 24
```

## ğŸ“Š API æ¥å£

### HTTP REST API

- `GET /api/jobs` - è·å–ä»»åŠ¡åˆ—è¡¨
- `POST /api/jobs` - åˆ›å»ºæ–°ä»»åŠ¡
- `PUT /api/jobs/:id` - æ›´æ–°ä»»åŠ¡
- `DELETE /api/jobs/:id` - åˆ é™¤ä»»åŠ¡
- `POST /api/jobs/:id/execute` - æ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡

### gRPC API

gRPC æœåŠ¡å®šä¹‰åœ¨ `api/grpc/job.proto`ï¼Œæ”¯æŒï¼š
- ä»»åŠ¡ CRUD æ“ä½œ
- å®æ—¶ä»»åŠ¡çŠ¶æ€è®¢é˜…
- æ‰¹é‡æ“ä½œæ¥å£

## ğŸ–¥ï¸ Web ç•Œé¢åŠŸèƒ½

- **ä»ªè¡¨æ¿**: ç³»ç»Ÿæ¦‚è§ˆå’Œå®æ—¶ç»Ÿè®¡
- **ä»»åŠ¡ç®¡ç†**: ä»»åŠ¡çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œæ‰§è¡Œ
- **æ‰§è¡Œå†å²**: ä»»åŠ¡æ‰§è¡Œè®°å½•å’Œæ—¥å¿—æŸ¥çœ‹
- **å·¥ä½œèŠ‚ç‚¹**: åˆ†å¸ƒå¼å·¥ä½œèŠ‚ç‚¹ç®¡ç†
- **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·å’Œæƒé™ç®¡ç†
- **ç³»ç»Ÿç›‘æ§**: æ€§èƒ½æŒ‡æ ‡å’Œå‘Šè­¦

## ğŸ” è®¤è¯å’Œæƒé™

ç³»ç»Ÿæ”¯æŒåŸºäº JWT çš„è®¤è¯æœºåˆ¶ï¼š

1. **ç”¨æˆ·ç™»å½•**è·å– JWT Token
2. **æƒé™æ§åˆ¶**åŸºäºè§’è‰²å’Œèµ„æº
3. **ä¼šè¯ç®¡ç†**æ”¯æŒ Token åˆ·æ–°

é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

## ğŸ“ˆ ç›‘æ§å’Œå‘Šè­¦

### Prometheus æŒ‡æ ‡

ç³»ç»Ÿæš´éœ²ä»¥ä¸‹å…³é”®æŒ‡æ ‡ï¼š
- `job_execution_total` - ä»»åŠ¡æ‰§è¡Œæ€»æ•°
- `job_execution_duration` - ä»»åŠ¡æ‰§è¡Œæ—¶é•¿
- `job_queue_size` - ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦
- `worker_active_count` - æ´»è·ƒå·¥ä½œèŠ‚ç‚¹æ•°

### Grafana ä»ªè¡¨æ¿

é¢„é…ç½®çš„ Grafana ä»ªè¡¨æ¿åŒ…å«ï¼š
- ç³»ç»Ÿæ•´ä½“æ€§èƒ½æ¦‚è§ˆ
- ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡å›¾è¡¨
- é”™è¯¯ç‡å’Œå»¶è¿Ÿç›‘æ§
- èµ„æºä½¿ç”¨æƒ…å†µ

## ğŸ¤– AI æ™ºèƒ½è°ƒåº¦

é›†æˆ MCP (Model Context Protocol) æ”¯æŒï¼š

- **æ™ºèƒ½ä»»åŠ¡åˆ†æ**: AI åˆ†æä»»åŠ¡ç‰¹å¾å’Œå†å²æ•°æ®
- **åŠ¨æ€è°ƒåº¦ä¼˜åŒ–**: åŸºäºç³»ç»Ÿè´Ÿè½½æ™ºèƒ½è°ƒæ•´è°ƒåº¦ç­–ç•¥
- **å¼‚å¸¸æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†å¼‚å¸¸ä»»åŠ¡
- **æ€§èƒ½é¢„æµ‹**: é¢„æµ‹ä»»åŠ¡æ‰§è¡Œæ—¶é—´å’Œèµ„æºéœ€æ±‚

å¯ç”¨ MCP åŠŸèƒ½éœ€è¦é…ç½® AI æœåŠ¡ç«¯ç‚¹ã€‚

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ä»»åŠ¡ç±»å‹

1. åœ¨ `internal/job/` ä¸­å®šä¹‰ä»»åŠ¡é€»è¾‘
2. æ›´æ–° `api/grpc/job.proto` æ¥å£å®šä¹‰
3. å®ç°å¯¹åº”çš„ HTTP API å¤„ç†å™¨
4. æ·»åŠ å‰ç«¯ç•Œé¢æ”¯æŒ

### æ‰©å±•ç›‘æ§æŒ‡æ ‡

1. åœ¨ç›¸åº”æœåŠ¡ä¸­å®šä¹‰ Prometheus æŒ‡æ ‡
2. æ›´æ–° Grafana ä»ªè¡¨æ¿é…ç½®
3. æ·»åŠ å‘Šè­¦è§„åˆ™ (å¦‚éœ€è¦)

### è‡ªå®šä¹‰æƒé™

1. åœ¨ `internal/permission/` ä¸­å®šä¹‰æƒé™é€»è¾‘
2. æ›´æ–° JWT ä¸­é—´ä»¶
3. å‰ç«¯æ·»åŠ æƒé™æ£€æŸ¥

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ MySQL æœåŠ¡çŠ¶æ€
   - éªŒè¯é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

2. **Redis è¿æ¥å¤±è´¥**
   - ç¡®è®¤ Redis æœåŠ¡è¿è¡Œ
   - æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

3. **å‰ç«¯è®¿é—® 404**
   - ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨
   - æ£€æŸ¥ Nginx ä»£ç†é…ç½®

4. **gRPC è¿æ¥è¶…æ—¶**
   - éªŒè¯é˜²ç«å¢™è§„åˆ™
   - æ£€æŸ¥ gRPC ç«¯å£é…ç½®

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs go-job

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs mysql

# æŸ¥çœ‹ Redis æ—¥å¿—
docker-compose logs redis
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- åˆ›å»º [Issue](../../issues)
- å‘é€é‚®ä»¶è‡³: [your-email@example.com]
- åŠ å…¥è®¨è®ºç¾¤: [ç¾¤å·æˆ–é“¾æ¥]

---

**æ„Ÿè°¢ä½¿ç”¨ Go-Jobï¼** ğŸ‰
